(this["webpackJsonpopencast-editor"]=this["webpackJsonpopencast-editor"]||[]).push([[0],{118:function(e){e.exports=JSON.parse('{"mainMenu":{"cutting-button":"Cutting","finish-button":"Finish","select-tracks-button":"Tracks","thumbnail-button":"Thumbnail","metadata-button":"Metadata","tooltip-aria":"Main Navigation"},"cuttingActions":{"cut-button":"Cut","cut-tooltip":"Split the segment at the current scrubber position. Hotkey: {{hotkeyName}}","cut-tooltip-aria":"Cut. Split the segment at the current scrubber position. Hotkey: {{hotkeyName}}.","delete-button":"Delete","delete-restore-tooltip":"Mark or unmark the segment at the current position as to be deleted. Hotkey: {{hotkeyName}}","delete-restore-tooltip-aria":"Delete and Restore. Mark or unmark the segment at the current position as to be deleted. Hotkey: {{hotKeyName}}.","restore-button":"Restore","mergeLeft-button":"Merge Left","mergeLeft-tooltip":"Combine the currently active segment with the segment to its left. Hotkey: {{hotkeyName}}","mergeLeft-tooltip-aria":"Merge Left. Combine the currently active segment with the segment to its left. Hotkey: {{hotkeyName}}.","mergeRight-button":"Merge Right","mergeRight-tooltip":"Combine the currently active segment with the segment to its right. Hotkey: {{hotkeyName}}","mergeRight-tooltip-aria":"Merge Right. Combine the currently active segment with the segment to its right. Hotkey: {{hotkeyName}}.","zoom":"Zoom","zoomOut-tooltip":"Zoom out. Hotkey: {{hotkeyName}}.","zoomOut-tooltip-aria":"Zoom out. Hotkey: {{hotkeyName}}.","zoomIn-tooltip":"Zoom in. Hotkey: {{hotkeyName}}.","zoomIn-tooltip-aria":"Zoom in. Hotkey: {{hotkeyName}}."},"video":{"previewButton":"Preview Mode","previewButton-tooltip":"Skips deleted segments when playing the video. Currently {{status}}. Hotkey: {{hotkeyName}}","previewButton-aria":"Enable or disable preview mode. Hotkey: {{hotkeyName}}.","playButton-tooltip":"Play Button","time-duration-tooltip":"Playback time and duration","duration-aria":"Duration","time-aria":"Current time","comError-text":"A problem occurred during communication with Opencast.","loadError-text":"An error has occurred loading this video.","title-tooltip":"Video Title","presenter-tooltip":"Video Presenters","controls-tooltip":"Video Controls"},"finishMenu":{"save-button":"Save changes","start-button":"Start processing","discard-button":"Discard changes"},"save":{"headline-text":"Save current project","confirm-button":"Yes, save changes","confirmButton-default-tooltip":"Save Button","confirmButton-attempting-tooltip":"Attempting to save","confirmButton-success-tooltip":"Saved successfully","confirmButton-failed-tooltip":"Save failed","info-text":"The video will not be processed but all cutting information will be stored in Opencast. You can continue your edit later.","success-text":"Changes saved successfully!","success-tooltip-aria":"Saved successfully","saveArea-tooltip":"Save Area"},"discard":{"headline-text":"Discard changes","confirm-button":"Yes, discard changes","confirm-tooltip":"Discard changes button","info-text":"Discard all the changes you made? This cannot be undone!"},"theEnd":{"discarded-text":"All your changes are now lost forever. You can now close the editor.","startOver-button":"Let me start over!","startOver-tooltip":"Reload the page to start over","info-text":"Changes successfully saved to Opencast. Processing your changes may take up to {{duration}} hours. You can now close the editor.\\n"},"workflowSelection":{"saveAndProcess-text":"Save and Process","selectWF-text":"Select a workflow","noWorkflows-text":"A problem occurred, there are no workflows to process your changes with.<3/> Please save your changes and contact an Opencast Administrator.\\n","oneWorkflow-text":"The video will be cut and processed with the workflow \\"{{workflow}}\\". <3/> This will take some time.\\n","manyWorkflows-text":"Select which workflow Opencast should use for processing.","startProcessing-button":"Start processing","back-button":"Take me back","selectWF-button":"Click to select this workflow","selectWF-button-aria":"Press to select the workflow: {{stateName}}\\n"},"timeline":{"generateWaveform-text":"Generating Waveform","segment-tooltip":"Segment {{segment}}","scrubber-text-aria":"Scrubber. {{currentTime}}. Active segment: {{segment}}. {{segmentStatus}}. Controls: {{moveLeft}} and {{moveRight}} to move the scrubber. {{increase}} and {{decrease}} to increase/decrase the move delta.\\n","segments-text-aria":"Segment {{index}}. {{segmentStatus}}. Start: {{start}}. End: {{end}}.\\n"},"workflowConfig":{"headline-text":"Workflow Configuration","area-tooltip":"Workflow Configuration Area","satisfied-text":"Satisfied with your configuration?","confirm-button":"Yes, start processing"},"metadata":{"EVENTS-EVENTS-DETAILS-CATALOG-EPISODE":"Episode Metadata","submit-button":"Submit","submit-button-tooltip":"Confirm your changes","reset-button":"Reset","reset-button-tooltip":"Undo all your changes","submit-helpertext":"Make changes as you like, then hit the {{buttonName}} button.\\nNote that you will still have to start processing for your changes to take effect.","validation":{"required":"Required","duration-format":"Format must be HH:MM:SS","datetime":"Invalid"},"labels":{"title":"Title","subject":"Subject","description":"Description","language":"Language","rightsHolder":"Rights","license":"License","isPartOf":"Series","creator":"Presenter(s)","contributor":"Contributor(s)","startDate":"Start date","duration":"Duration","location":"Location","source":"Source","created":"Created","publisher":"Publisher","identifier":"UID"},"language":{"LANGUAGES-SLOVENIAN":"Slovenian","LANGUAGES-PORTUGESE":"Portugese","LANGUAGES-ROMANSH":"Romansh","LANGUAGES-ARABIC":"Arabic","LANGUAGES-POLISH":"Polish","LANGUAGES-ITALIAN":"Italian","LANGUAGES-CHINESE":"Chinese","LANGUAGES-FINNISH":"Finnish","LANGUAGES-DANISH":"Danish","LANGUAGES-UKRAINIAN":"Ukrainian","LANGUAGES-FRENCH":"French","LANGUAGES-SPANISH":"Spanish","LANGUAGES-GERMAN_CH":"Swiss German","LANGUAGES-NORWEGIAN":"Norwegian","LANGUAGES-RUSSIAN":"Russian","LANGUAGES-JAPANESE":"Japanese","LANGUAGES-DUTCH":"Dutch","LANGUAGES-TURKISH":"Turkish","LANGUAGES-HINDI":"Hindi","LANGUAGES-SWEDISH":"Swedish","LANGUAGES-ENGLISH":"English","LANGUAGES-GERMAN":"German"},"license":{"EVENTS-LICENSE-CC0":"CC0","EVENTS-LICENSE-CCBYND":"CC-BY-ND","EVENTS-LICENSE-CCBYNCND":"CC-BY-NC-ND","EVENTS-LICENSE-CCBYNCSA":"CC-BY-NC-SA","EVENTS-LICENSE-ALLRIGHTS":"All rights reserved","EVENTS-LICENSE-CCBYSA":"CC-BY-SA","EVENTS-LICENSE-CCBYNC":"CC-BY-NC","EVENTS-LICENSE-CCBY":"CC-BY"}},"error":{"generic-message":"A critical error has occurred!","details":"Details: "},"landing":{"main-heading":"Welcome to the Video Editor","contact-admin":"If you were trying to edit a specific video but are seeing this page, please contact your administrator.","start-editing-1":"To start editing, specify the parameter ","start-editing-2":" with the media package id of the video you wish to edit.","link-to-documentation":"More information about configuring the video editor is available in the administration guide at "},"various":{"error-details-text":"Details: {{errorMessage}}\\n","error-noDetails-text":"No error details are available.","error-text":"An error has occurred. Please wait a bit and try again.","goBack-button":"No, take me back"},"trackSelection":{"description":"Select or deselect which tracks are used for processing and publication.","trackInactive":"inactive","deleteTrackText":"Delete Track","restoreTrackText":"Restore Track","cannotDeleteTrackText":"Cannot Delete Track","deleteTrackTooltip":"Do not encode and publish this track.","restoreTrackTooltip":"Encode and publish this track.","cannotDeleteTrackTooltip":"Cannot remove this track from publication."}}')},149:function(e,t,n){},220:function(e,t,n){"use strict";n.r(t);n(14);var a,r=n(0),o=n.n(r),i=n(17),c=n.n(i),s=(n(149),n(3)),l=n(1),u=n(18),d=n(12),b=n(7),f=n(22);!function(e){e.cutting="Cutting",e.metadata="Metadata",e.trackSelection="Select Tracks",e.thumbnail="Thumbnail",e.finish="Finish"}(a||(a={}));var j,p,m,g={value:a.cutting},h=Object(f.c)({name:"mainMenuState",initialState:g,reducers:{setState:function(e,t){e.value=t.payload}}}),x=h.actions.setState,v=function(e){return e.mainMenuState.value},O=h.reducer,y=Object(f.c)({name:"finishState",initialState:{value:"Start processing",pageNumber:0},reducers:{setState:function(e,t){e.value=t.payload},setPageNumber:function(e,t){e.pageNumber=t.payload}}}),w=y.actions,k=w.setState,S=w.setPageNumber,C=function(e){return e.finishState.value},A=function(e){return e.finishState.pageNumber},E=y.reducer,I=n(8),N=n.n(I),T=n(9),D=n(116),P=n.n(D),R=n(65),L=n.n(R),M={id:void 0,opencast:{url:window.location.origin,name:void 0,password:void 0},metadata:{show:!0,configureFields:void 0},trackSelection:{show:!0},thumbnail:{show:!1}},W=function(){var e=Object(T.a)(N.a.mark((function e(){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H().then((function(e){j=G(e,!1,"src-server","from server settings file")}));case 2:t=new URLSearchParams(window.location.search),n={},t.forEach((function(e,t){var a=n;if(!t.startsWith("opencast.")){"mediaPackageId"===t&&(t="id");var r=t.split(".");r.slice(0,-1).forEach((function(e){e in a||(a[e]={}),a=a[e]})),a[r[r.length-1]]=e}})),p=G(n,!0,"src-url","given as URL GET parameter"),m=z.all([M,j,p]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(T.a)(N.a.mark((function e(){var t,n,a,r,o,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n="/437/2021-10-19_07-39-59").endsWith("/")||(n+="/"),a=Object({NODE_ENV:"production",PUBLIC_URL:"/437/2021-10-19_07-39-59",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GIT_SHA:"585c3e2742a768ad69fb8314b23f82e821f20786",REACT_APP_BUILD_DATE:"Tue Oct 19 07:40:44 UTC 2021"}).REACT_APP_SETTINGS_PATH||"editor-settings.toml",r=a.startsWith("/")?"":n,o="".concat(window.location.origin).concat(r).concat(a),e.prev=5,e.next=8,fetch(o);case 8:i=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),console.warn("Could not access '".concat(a,"' due to network error!"),e.t0||""),e.abrupt("return",null);case 15:if(404!==i.status){e.next=20;break}return console.debug("'".concat(a,"' returned 404: ignoring")),e.abrupt("return",null);case 20:if(i.ok){e.next=23;break}return console.error("Fetching '".concat(a,"' failed: ").concat(i.status," ").concat(i.statusText)),e.abrupt("return",null);case 23:if(!(null===(t=i.headers.get("Content-Type"))||void 0===t?void 0:t.startsWith("text/html"))){e.next=26;break}return console.warn("'".concat(a,"' request has 'Content-Type: text/html' -> ignoring...")),e.abrupt("return",null);case 26:return e.prev=26,e.t1=P.a,e.next=30,i.text();case 30:return e.t2=e.sent,e.abrupt("return",(0,e.t1)(e.t2));case 34:throw e.prev=34,e.t3=e.catch(26),console.error("Could not parse '".concat(a,"' as TOML: "),e.t3),new SyntaxError("Could not parse '".concat(a,"' as TOML: ").concat(e.t3));case 38:case"end":return e.stop()}}),e,null,[[5,11],[26,34]])})));return function(){return e.apply(this,arguments)}}(),G=function(e,t,n,a){var r=function(e,t,n){return"function"===typeof e?o(e,t,n):i(e,t,n)},o=function(e,r,o){try{var i=e(r,t,n);return void 0===i?r:i}catch(c){return console.warn("Validation of setting '".concat(o,"' (").concat(a,") with value '").concat(r,"' failed: ")+"".concat(c,". Ignoring.")),null}},i=function(e,t,n){var o={};for(var i in t){var c=n?"".concat(n,".").concat(i):i;if(i in e){var s=r(e[i],t[i],c);null!==s&&(o[i]=s)}else console.warn("'".concat(c,"' (").concat(a,") is not a valid settings key. Ignoring."))}return o};return r(F,e,"")},B={string:function(e,t){if("string"!==typeof e)throw new Error("is not a string, but should be")},boolean:function(e,t){if("boolean"!==typeof e){if(t){if("true"===e)return!0;if("false"===e)return!1;throw new Error("can't be parsed as boolean")}throw new Error("is not a boolean")}},objectsWithinObjects:function(e,t){for(var n in e){if("string"!==typeof n)throw new Error("is not a string, but should be");for(var a in e[n]){if("string"!==typeof a)throw new Error("is not a string, but should be");for(var r in e[n][a]){if("string"!==typeof r)throw new Error("is not a string, but should be");if("show"===r&&"boolean"!==typeof e[n][a][r])throw new Error("is not a boolean");if("readonly"===r&&"boolean"!==typeof e[n][a][r])throw new Error("is not a boolean")}}}}},F={id:B.string,opencast:{url:B.string,name:B.string,password:B.string},metadata:{show:B.boolean,configureFields:B.objectsWithinObjects},trackSelection:{show:B.boolean},thumbnail:{show:B.boolean}},z=function(e,t){return L()(e,t,{arrayMerge:_})};z.all=function(e){return L.a.all(e,{arrayMerge:_})};var U,_=function(e,t,n){return t},V=n(117),K=n.n(V),q=function(e,t){var n=Math.pow(10,t);return Math.round((e+Number.EPSILON)*n)/n},Y=function(e){return new Promise((function(t,n){return setTimeout(t,e)}))},J=function(e){var t=new Date(e||0).toISOString().substr(11,2),n=new Date(e||0).toISOString().substr(14,2),a=new Date(e||0).toISOString().substr(17,2),r=[];return parseInt(t)>0&&r.push(t+" hours, "),(parseInt(n)>0||parseInt(t)>0)&&r.push(n+" minutes, "),r.push(a+" seconds"),r.join("")};function Z(){if(void 0!==U)return U;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.style.position="absolute",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),U=1===e.scrollHeight,e.parentNode&&e.parentNode.removeChild(e),U}var X=function(){return Object(l.jsx)(l.Global,{styles:$})},$=Object(l.css)({emotionNormalize:K.a,body:{backgroundColor:"snow",fontSize:"medium",minHeight:"100vh"}},"",""),Q=function(e,t){var n=e/2,a=e/4;return Object(s.a)(Object(s.a)({},Z()&&{gap:"".concat(e,"px")}),!Z()&&Object(s.a)({">*":{marginTop:"".concat(a,"px"),marginBottom:"".concat(a,"px"),marginRight:"".concat(n,"px"),marginLeft:"".concat(n,"px")}},t&&{">*:first-of-type":{marginLeft:"0px"},">*:last-child":{marginRight:"0px"}}))},ee=Object(l.css)(Object(s.a)(Object(s.a)({borderRadius:"10px",cursor:"pointer",transitionDuration:"0.3s",transitionProperty:"transform","&:hover":{transform:"scale(1.1)"},"&:focus":{transform:"scale(1.1)"},"&:active":{transform:"scale(0.9)"},display:"flex",justifyContent:"center",alignItems:"center"},Q(10,!1)),{},{textAlign:"center"}),"",""),te=Object(l.css)(Object(s.a)(Object(s.a)({borderRadius:"10px",cursor:"pointer",opacity:"0.4",display:"flex",justifyContent:"center",alignItems:"center"},Q(10,!1)),{},{textAlign:"center"}),"",""),ne={name:"1666ohp",styles:"width:200px;padding:16px;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);justify-content:space-around"},ae=Object(l.css)(Object(s.a)({display:"flex",flexDirection:"row"},Q(20,!1)),"",""),re={name:"651ll8",styles:"position:absolute;left:-99999px;height:1px;width:1px;overflow:hidden"},oe=function(e){return Object(l.css)(Object(s.a)(Object(s.a)({},!e&&{display:"none"}),{},{borderColor:"red",borderStyle:"dashed",fontWeight:"bold",padding:"10px"}),"","")},ie=n(16),ce=n(36);function se(e){return le.apply(this,arguments)}function le(){return(le=Object(T.a)(N.a.mark((function e(t){var n,a,r,o,i,c,l,u,d,b,f=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},a=n.body,r=Object(ce.a)(n,["body"]),o={"Content-Type":"application/json"},i={},m.opencast.name&&m.opencast.password&&(c=btoa(unescape(encodeURIComponent(m.opencast.name+":"+m.opencast.password))),i={Authorization:"Basic ".concat(c)}),l=Object(s.a)(Object(s.a)({method:a?"POST":"GET"},r),{},{headers:Object(s.a)(Object(s.a)(Object(s.a)({},o),r.headers),i)}),a&&(l.body=JSON.stringify(a)),e.prev=6,e.next=9,window.fetch(t,l);case 9:return b=e.sent,e.next=12,b.text();case 12:if(d=e.sent,!b.url.includes("login.html")){e.next=15;break}throw new Error("Got redirected to login page, authentification failed.");case 15:if(!b.ok){e.next=18;break}return u=d.length?JSON.parse(d):"",e.abrupt("return",u);case 18:throw new Error(b.statusText);case 21:return e.prev=21,e.t0=e.catch(6),e.abrupt("return",Promise.reject(b.status?"Status "+b.status+": "+d:e.t0.message));case 24:case"end":return e.stop()}}),e,null,[[6,21]])})))).apply(this,arguments)}se.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return se(e,Object(s.a)(Object(s.a)({},t),{},{method:"GET"}))},se.post=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return se(e,Object(s.a)(Object(s.a)({},n),{},{body:t}))};var ue={isPlaying:!1,isPlayPreview:!0,currentlyAt:0,segments:[{id:Object(f.d)(),start:0,end:1,deleted:!1}],tracks:[],activeSegmentIndex:0,selectedWorkflowIndex:0,previewTriggered:!1,clickTriggered:!1,aspectRatios:[],hasChanges:!1,timelineZoom:1,timelineScrollPosition:0,waveformImages:[],videoURLs:[],videoCount:0,duration:0,title:"",presenters:[],workflows:[],status:"idle",error:void 0},de=Object(f.b)("video/fetchVideoInformation",Object(T.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.id){e.next=2;break}throw new Error("Missing media package identifier");case 2:return e.next=4,se.get("".concat(m.opencast.url,"/editor/").concat(m.id,"/edit.json"));case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))),be=function(e,t){e.currentlyAt=q(t,0),e.currentlyAt<0&&(e.currentlyAt=0),0!==e.duration&&e.duration<e.currentlyAt&&(e.currentlyAt=e.duration),je(e),ge(e)},fe=Object(f.c)({name:"videoState",initialState:ue,reducers:{setTrackEnabled:function(e,t){var n,a=Object(ie.a)(e.tracks);try{for(a.s();!(n=a.n()).done;){var r=n.value;r.id===t.payload.id&&(r.audio_stream.enabled=t.payload.enabled,r.video_stream.enabled=t.payload.enabled)}}catch(o){a.e(o)}finally{a.f()}e.hasChanges=!0},setIsPlaying:function(e,t){e.isPlaying=t.payload},setIsPlayPreview:function(e,t){e.isPlayPreview=t.payload},setPreviewTriggered:function(e,t){e.previewTriggered=t.payload},setClickTriggered:function(e,t){e.clickTriggered=t.payload},setCurrentlyAt:function(e,t){be(e,t.payload)},setCurrentlyAtInSeconds:function(e,t){be(e,q(1e3*t.payload,0))},addSegment:function(e,t){e.segments.push(t.payload)},setAspectRatio:function(e,t){e.aspectRatios[t.payload.dataKey]={width:t.payload.width,height:t.payload.height}},setHasChanges:function(e,t){e.hasChanges=t.payload},cut:function(e){if(e.segments[e.activeSegmentIndex].start===e.currentlyAt||e.segments[e.activeSegmentIndex].end===e.currentlyAt)return e;var t={id:Object(f.d)(),start:e.segments[e.activeSegmentIndex].start,end:e.currentlyAt,deleted:e.segments[e.activeSegmentIndex].deleted},n={id:Object(f.d)(),start:e.currentlyAt,end:e.segments[e.activeSegmentIndex].end,deleted:e.segments[e.activeSegmentIndex].deleted};e.segments.splice(e.activeSegmentIndex,1,t,n),e.hasChanges=!0},markAsDeletedOrAlive:function(e){e.segments[e.activeSegmentIndex].deleted=!e.segments[e.activeSegmentIndex].deleted,e.hasChanges=!0},setSelectedWorkflowIndex:function(e,t){e.selectedWorkflowIndex=t.payload},mergeLeft:function(e){me(e,e.activeSegmentIndex,e.activeSegmentIndex-1),e.hasChanges=!0},mergeRight:function(e){me(e,e.activeSegmentIndex,e.activeSegmentIndex+1),e.hasChanges=!0},setZoom:function(e,t){e.timelineZoom=Math.max(1,Math.min(2,t.payload))},setTimelineScrollPosition:function(e,t){e.timelineScrollPosition=t.payload},setWaveformImages:function(e,t){e.waveformImages=t.payload}},extraReducers:function(e){e.addCase(de.pending,(function(e,t){e.status="loading"})),e.addCase(de.fulfilled,(function(e,t){e.status="success",e.videoURLs=t.payload.tracks.reduce((function(e,t){return e.push(t.uri),e}),[]),e.videoCount=e.videoURLs.length,e.duration=t.payload.duration,e.title=t.payload.title,e.presenters=[],e.segments=pe(t.payload.segments,t.payload.duration),e.tracks=t.payload.tracks,e.workflows=t.payload.workflows.sort((function(e,t){return e.displayOrder-t.displayOrder})),e.aspectRatios=new Array(e.videoCount)})),e.addCase(de.rejected,(function(e,t){e.status="failed",e.error=t.error.message}))}}),je=function(e){e.activeSegmentIndex=e.segments.findIndex((function(t){return t.start<=e.currentlyAt&&t.end>=e.currentlyAt})),e.activeSegmentIndex<0&&(e.activeSegmentIndex=0)},pe=function(e,t){var n=[];return 0===e.length&&n.push({id:Object(f.d)(),start:0,end:t,deleted:!1}),e.forEach((function(e){n.push({id:Object(f.d)(),start:e.start,end:e.end,deleted:e.deleted})})),n},me=function(e,t,n){n<0||n>e.segments.length-1||(e.segments[t].start=Math.min(e.segments[t].start,e.segments[n].start),e.segments[t].end=Math.max(e.segments[t].end,e.segments[n].end),e.segments.splice(n,1),je(e))},ge=function(e){if(e.isPlaying&&e.segments[e.activeSegmentIndex].deleted&&e.isPlayPreview){for(var t=e.segments[e.activeSegmentIndex].end,n=e.activeSegmentIndex;n<e.segments.length;n++)if(t=e.segments[n].end,!e.segments[n].deleted){t=e.segments[n].start+1;break}e.currentlyAt=t,e.previewTriggered=!0,je(e)}},he=fe.actions,xe=he.setTrackEnabled,ve=he.setIsPlaying,Oe=he.setIsPlayPreview,ye=he.setCurrentlyAt,we=he.setCurrentlyAtInSeconds,ke=(he.addSegment,he.setAspectRatio),Se=he.setHasChanges,Ce=he.cut,Ae=he.markAsDeletedOrAlive,Ee=he.setSelectedWorkflowIndex,Ie=he.mergeLeft,Ne=he.mergeRight,Te=he.setZoom,De=he.setTimelineScrollPosition,Pe=he.setWaveformImages,Re=he.setPreviewTriggered,Le=he.setClickTriggered,Me=function(e){return e.videoState.isPlaying},We=function(e){return e.videoState.isPlayPreview},He=function(e){return e.videoState.previewTriggered},Ge=function(e){return e.videoState.clickTriggered},Be=function(e){return e.videoState.currentlyAt},Fe=function(e){return e.videoState.currentlyAt/1e3},ze=function(e){return e.videoState.segments},Ue=function(e){return e.videoState.activeSegmentIndex},_e=function(e){return!e.videoState.segments[e.videoState.activeSegmentIndex].deleted},Ve=function(e){return e.videoState.selectedWorkflowIndex},Ke=function(e){return e.videoState.hasChanges},qe=function(e){return e.videoState.timelineZoom},Ye=function(e){return e.videoState.timelineScrollPosition},Je=function(e){return e.videoState.waveformImages},Ze=function(e){return e.videoState.videoURLs},Xe=function(e){return e.videoState.videoCount},$e=function(e){return e.videoState.duration},Qe=function(e){return e.videoState.duration/1e3},et=function(e){return e.videoState.title},tt=function(e){return e.videoState.presenters},nt=function(e){return e.videoState.tracks},at=function(e){return e.videoState.workflows},rt=function(e){return function(e){var t=Math.min.apply(Math,e.map((function(e){return e.height}))),n=Math.min.apply(Math,e.map((function(e){return e.width})));return n*=e.length,Math.min(t/n*100,28.125)}(e.videoState.aspectRatios)},ot=fe.reducer,it=n(132),ct=n(42),st=n(130),lt={en:{translation:n(118)}};it.a.use(ct.e).use(st.a).init({resources:lt,fallbackLng:"en"});var ut=n(253),dt={catalogs:[],hasChanges:!1,status:"idle",error:void 0,postStatus:"idle",postError:void 0},bt=Object(f.b)("metadata/fetchMetadata",Object(T.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.id){e.next=2;break}throw new Error("Missing media package identifier");case 2:return e.next=4,se.get("".concat(m.opencast.url,"/editor/").concat(m.id,"/metadata.json"));case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))),ft=Object(f.b)("metadata/postMetadata",function(){var e=Object(T.a)(N.a.mark((function e(t,n){var a,r,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getState,m.id){e.next=3;break}throw new Error("Missing media package identifier");case 3:return r=a(),e.next=6,se.post("".concat(m.opencast.url,"/editor/").concat(m.id,"/metadata.json"),r.metadataState.catalogs);case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),jt=Object(f.c)({name:"metadataState",initialState:dt,reducers:{setFieldValue:function(e,t){e.catalogs[t.payload.catalogIndex].fields[t.payload.fieldIndex].value=t.payload.value,e.hasChanges=!0},setFieldReadonly:function(e,t){e.catalogs[t.payload.catalogIndex].fields[t.payload.fieldIndex].readOnly=t.payload.value},setHasChanges:function(e,t){e.hasChanges=t.payload},resetPostRequestState:function(e){e.postStatus="idle"}},extraReducers:function(e){e.addCase(bt.pending,(function(e,t){e.status="loading"})),e.addCase(bt.fulfilled,(function(e,t){e.catalogs=t.payload,e.status="success"})),e.addCase(bt.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),e.addCase(ft.pending,(function(e,t){e.postStatus="loading"})),e.addCase(ft.fulfilled,(function(e,t){e.postStatus="success"})),e.addCase(ft.rejected,(function(e,t){e.postStatus="failed",e.postError=t.error.message}))}}),pt=jt.actions,mt=pt.setFieldValue,gt=pt.setHasChanges,ht=pt.setFieldReadonly,xt=pt.resetPostRequestState,vt=function(e){return e.metadataState.catalogs},Ot=function(e){return e.metadataState.hasChanges},yt=function(e){return e.metadataState.status},wt=function(e){return e.metadataState.error},kt=function(e){return e.metadataState.postStatus},St=function(e){return e.metadataState.postError},Ct=function(e){var t,n=Object(ie.a)(e.metadataState.catalogs);try{for(n.s();!(t=n.n()).done;){var a=t.value;if("dublincore/episode"===a.flavor){var r,o=Object(ie.a)(a.fields);try{for(o.s();!(r=o.n()).done;){var i=r.value;if("title"===i.id)return i.value}}catch(c){o.e(c)}finally{o.f()}}}}catch(c){n.e(c)}finally{n.f()}},At=jt.reducer,Et={status:"idle",error:void 0},It=Object(f.b)("video/postVideoInformation",function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.id){e.next=2;break}throw new Error("Missing media package id");case 2:return e.next=4,se.post("".concat(m.opencast.url,"/editor/").concat(m.id,"/edit.json"),{segments:Tt(t.segments),tracks:t.tracks});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Nt=Object(f.c)({name:"workflowPostState",initialState:Et,reducers:{resetPostRequestState:function(e){e.status="idle"}},extraReducers:function(e){e.addCase(It.pending,(function(e,t){e.status="loading"})),e.addCase(It.fulfilled,(function(e,t){e.status="success"})),e.addCase(It.rejected,(function(e,t){e.status="failed",e.error=t.error.message}))}}),Tt=function(e){var t=[];return e.forEach((function(e){t.push({start:e.start,end:e.end,deleted:e.deleted,selected:!1})})),t},Dt=Nt.actions.resetPostRequestState,Pt=function(e){return e.workflowPostState.status},Rt=function(e){return e.workflowPostAndProcessState.error},Lt=Nt.reducer,Mt=function(e){var t=e.iconName,n=e.stateName,r=Object(ut.a)().t,o=Object(b.b)(),i=Object(b.c)(v),c=function(){o(x(n)),n===a.finish&&o(S(0)),o(ve(!1)),o(Dt()),o(xt())},d=Object(l.css)(Object(s.a)(Object(s.a)({width:"100%",height:"100px"},i===n&&{backgroundColor:"#DDD"}),{},{flexDirection:"column"}),"",""),f=r("mainMenu."+n.toLowerCase().replace(/ +/,"-")+"-button","Could not load String value");return Object(l.jsx)("li",{css:[ee,d,"",""],role:"menuitem",tabIndex:0,onClick:c,onKeyDown:function(e){"Enter"===e.key&&c()}},Object(l.jsx)(u.a,{icon:t,size:"2x"}),Object(l.jsx)("div",null,f))},Wt=function(){var e=Object(ut.a)().t,t=Object(l.css)(Object(s.a)({borderRight:"1px solid #BBB",width:"100px",display:"flex",flexDirection:"column",flexShrink:0,alignItems:"center",padding:"20px"},Q(30,!1)),"","");return Object(l.jsx)("nav",{css:t,role:"navigation","aria-label":e("mainMenu.tooltip-aria")},Object(l.jsx)(Mt,{iconName:d.e,stateName:a.cutting}),m.metadata.show&&Object(l.jsx)(Mt,{iconName:d.k,stateName:a.metadata}),m.trackSelection.show&&Object(l.jsx)(Mt,{iconName:d.h,stateName:a.trackSelection}),m.thumbnail.show&&Object(l.jsx)(Mt,{iconName:d.n,stateName:a.thumbnail}),Object(l.jsx)(Mt,{iconName:d.r,stateName:a.finish}))},Ht=n(13),Gt=n(78),Bt=n.n(Gt),Ft=n(48),zt=n(122),Ut=function(e){var t=e;return zt.isMacOs&&(t=t.replace("Alt","Option")),t},_t={cut:Ut("Control+Alt+c"),delete:Ut("Control+Alt+d"),mergeLeft:Ut("Control+Alt+n"),mergeRight:Ut("Control+Alt+m"),zoomIn:Ut("Control+Alt+o"),zoomOut:Ut("Control+Alt+u"),preview:Ut("Control+Alt+p"),play:Ut("Space")},Vt={left:[Ut("Control+Alt+j"),"ArrowLeft"],right:[Ut("Control+Alt+l"),"ArrowRight"],increase:[Ut("Control+Alt+i"),"ArrowUp"],decrease:[Ut("Control+Alt+k"),"ArrowDown"]},Kt=Object(f.c)({name:"errorState",initialState:{error:!1,errorMessage:"Unknown error",errorDetails:""},reducers:{setError:function(e,t){e.error=t.payload.error,e.errorMessage=t.payload.errorMessage,e.errorDetails=t.payload.errorDetails}}}),qt=Kt.actions.setError,Yt=function(e){return e.errorState.error},Jt=function(e){return e.errorState.errorMessage},Zt=function(e){return e.errorState.errorDetails},Xt=Kt.reducer;var $t={name:"14fvduy",styles:"position:absolute;top:0;left:0"},Qt=function(e){var t=e.dataKey,n=e.url,a=e.isPrimary,i=Object(ut.a)().t,c=Object(b.b)(),u=Object(b.c)(Me),d=Object(b.c)(Fe),f=Object(b.c)(Qe),j=Object(b.c)(He),p=Object(b.c)(Ge),m=Object(b.c)(rt),g=Object(r.useRef)(null),h=Object(r.useState)(!1),x=Object(Ht.a)(h,2),v=x[0],O=x[1],y=Object(r.useState)(!1),w=Object(Ht.a)(y,2),k=w[0],S=w[1],C=function(e){a&&q(d,3)!==q(e.playedSeconds,3)&&c(we(e.playedSeconds))};function A(){return(A=Object(T.a)(N.a.mark((function e(){var n,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.current||!g.current.getInternalPlayer()){e.next=11;break}n=g.current.getInternalPlayer().videoWidth,a=g.current.getInternalPlayer().videoHeight;case 3:if(0!==n&&0!==a){e.next=10;break}return e.next=6,Y(100);case 6:n=g.current.getInternalPlayer().videoWidth,a=g.current.getInternalPlayer().videoHeight,e.next=3;break;case 10:c(ke({dataKey:t,width:n,height:a}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(){O(!0),function(){A.apply(this,arguments)}()},I=function(){a&&(c(ve(!1)),c(we(f)))};Object(r.useEffect)((function(){!u&&g.current&&v&&g.current.seekTo(d,"seconds"),j&&g.current&&v&&(g.current.seekTo(d,"seconds"),c(Re(!1))),p&&g.current&&v&&(g.current.seekTo(d,"seconds"),c(Le(!1)))}));var D=function(e){S(!0)},P={file:{attributes:{tabIndex:"-1"}}},R=Object(l.css)(Object(s.a)(Object(s.a)({},!k&&{display:"none"}),{},{borderColor:"red",borderStyle:"dashed",fontWeight:"bold",padding:"10px"}),"",""),L=Object(l.css)({position:"relative",width:"100%",paddingTop:m+"%"},"",""),M=$t;return Object(l.jsx)(o.a.Fragment,null,k?Object(l.jsx)("div",{css:R,role:"alert"},Object(l.jsx)("span",null,i("video.loadError-text")," ")):Object(l.jsx)("div",{css:L},Object(l.jsx)(Bt.a,{url:n,css:M,ref:g,width:"100%",height:"100%",playing:u,muted:!a,onProgress:C,progressInterval:100,onReady:E,onEnded:I,onError:D,tabIndex:-1,config:P,disablePictureInPicture:!0})))},en={name:"6wjsds",styles:"width:100%;display:flex;justify-content:flex-start"},tn={name:"mz8fkx",styles:"width:100%;display:flex;justify-content:flex-end"},nn=function(){var e=Object(ut.a)().t,t=Object(l.css)(Object(s.a)({display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100%",padding:"20px"},Q(50,!1)),"",""),n=tn,a=en;return Object(l.jsx)("div",{css:t,title:e("video.controls-tooltip")},Object(l.jsx)("div",{css:n},Object(l.jsx)(on,null)),Object(l.jsx)(cn,null),Object(l.jsx)("div",{css:a},Object(l.jsx)(un,null)))},an={name:"1gnq0uh",styles:"cursor:pointer;transition-duration:0.3s;transition-property:transform;&:hover{transform:scale(1.05);}"},rn={name:"iaqz3e",styles:"display:inline-block;flex-wrap:nowrap"},on=function(){var e=Object(ut.a)().t,t=o.a.useRef(null),n=Object(b.b)(),r=Object(b.c)(We),i=Object(b.c)(v),c=function(e,t){var a;(e.preventDefault(),e.stopPropagation(),n(Oe(!r)),t)&&(null===(a=t.current)||void 0===a||a.blur())},f={preview:function(e){e&&c(e,void 0)}},j=Object(l.css)(Object(s.a)(Object(s.a)({cursor:"pointer",display:"flex"},Q(10,!1)),{},{justifyContent:"center",alignItems:"center"}),"",""),p=an;return Object(l.jsx)("div",{css:j,ref:t,title:e("video.previewButton-tooltip",{status:r?"on":"off",hotkeyName:_t[f.preview.name]}),role:"switch","aria-checked":r,tabIndex:0,"aria-hidden":!1,"aria-label":e("video.previewButton-aria",{hotkeyName:_t[f.preview.name]}),onClick:function(e){return c(e,t)},onKeyDown:function(e){" "===e.key&&c(e,void 0)}},Object(l.jsx)(Ft.GlobalHotKeys,{keyMap:_t,handlers:i===a.cutting?f:{},allowChanges:!0}),Object(l.jsx)("div",{css:rn},e("video.previewButton")),Object(l.jsx)(u.a,{css:p,icon:r?d.x:d.w,size:"1x"}))},cn=function(){var e=Object(ut.a)().t,t=Object(b.b)(),n=Object(b.c)(Me),r=Object(b.c)(v),i=function(e){e.preventDefault(),t(ve(!n))},c={play:function(e){e&&i(e)}};return Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)(Ft.GlobalHotKeys,{keyMap:_t,handlers:r===a.cutting?c:{},allowChanges:!0}),Object(l.jsx)(u.a,{css:[ee,"justify-self:center;",""],icon:n?d.m:d.o,size:"2x",title:e("video.playButton-tooltip"),role:"button","aria-pressed":n,tabIndex:0,"aria-hidden":!1,"aria-label":e("video.playButton-tooltip"),onClick:function(e){i(e)},onKeyDown:function(e){"Enter"===e.key&&i(e)}}))},sn={name:"1nvb49c",styles:"display:flex;flex-direction:row;gap:5px"},ln={name:"147w8p8",styles:"display:inline-block;width:100px"},un=function(){var e=Object(ut.a)().t,t=Object(b.c)(Be),n=Object(b.c)($e);return Object(l.jsx)("div",{css:sn},Object(l.jsx)("time",{css:ln,title:e("video.time-duration-tooltip"),tabIndex:0,role:"timer","aria-label":e("video.time-aria")+": "+J(t)},new Date(t||0).toISOString().substr(11,12))," / ",Object(l.jsx)("div",{tabIndex:0,"aria-label":e("video.duration-aria")+": "+J(n)},new Date(n||0).toISOString().substr(11,12)))},dn={name:"18oixho",styles:"font-weight:bold;font-size:24px;vertical-align:-2.5px"},bn={name:"akya17",styles:"display:inline-block;padding:15px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:500px"},fn={name:"11g4mt0",styles:"font-size:16px"},jn=function(){var e,t=Object(ut.a)().t,n=Object(b.c)(et),a=Object(b.c)(Ct),r=Object(b.c)(tt),o=bn,i=dn;return r&&r.length&&(e=Object(l.jsx)("div",{css:o,title:t("video.presenter-tooltip")},"by ",r.join(", "))),Object(l.jsx)("div",{title:t("video.area-tooltip"),css:fn},Object(l.jsx)("div",{css:[o,i,"",""],title:t("video.title-tooltip")},a||n),e)},pn=function(){var e=Object(ut.a)().t,t=Object(b.b)(),n=Object(b.c)(Ze),a=Object(b.c)(Xe),o=Object(b.c)((function(e){return e.videoState.status})),i=Object(b.c)((function(e){return e.videoState.error}));Object(r.useEffect)((function(){"idle"===o?t(de()):"failed"===o&&t(qt({error:!0,errorMessage:e("video.comError-text"),errorDetails:i}))}),[o,t,i,e]);for(var c=[],s=0;s<a;s++)c.push(Object(l.jsx)(Qt,{key:s,dataKey:s,url:n[s],isPrimary:0===s}));var u=Object(l.css)({display:"flex",width:"auto",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"0px",borderBottom:"1px solid #BBB"},"",""),d=Object(l.css)({display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100%"},"","");return Object(l.jsx)("div",{css:u},Object(l.jsx)(jn,null),Object(l.jsx)("div",{css:d},c),Object(l.jsx)(nn,null))},mn=n(79),gn=n.n(mn),hn=n(80),xn=n(129);function vn(e){var t=this;this.audioContext=new xn.a,this.oCanvas=document.createElement("canvas"),this.buffer={},this.WIDTH=0,this.HEIGHT=0,this.channelData=[],this.waveformImage="",this.audioBuffer=null,this.aveRMS=0,this.peakRMS=0,this.numberSamples=1e5,this.waveformType="img",this.drawWaveform=this.drawCanvasWaveform,e.width&&e.height&&this.setDimensions(e.width,e.height),e.samples&&(this.numberSamples=e.samples),e.type&&"svg"===e.type&&(this.waveformType="svg",this.drawWaveform=this.delegateToWorker,this.worker=null),e.media&&this.generateWaveform(e.media).then((function(){t.getAudioData(),t.drawWaveform(),"svg"!==t.waveformType&&n.forEach((function(e){e(t.waveformImage||t.svgPath,t.waveformType)}))})).catch((function(e){console.log("Waveform Worker: "+e),t._error=e.toString(),t.onerror.forEach((function(t){return t(e.toString())}))}));var n=[];Object.defineProperty(this,"oncomplete",{get:function(){return n},set:function(e,t){if("function"==typeof e){if(this.waveformImage||this.svgPath)return void e(this.waveformImage||this.svgPath,this.svgLength);n.push(e)}}});var a=[];Object.defineProperty(this,"onerror",{get:function(){return a},set:function(e,t){"function"==typeof e&&this._error&&""!==this._error?e(""):a.push(e)}})}vn.prototype={constructor:vn,setDimensions:function(e,t){this.oCanvas.width=e,this.WIDTH=e,this.oCanvas.height=t,this.HEIGHT=t,this.ocCtx=this.oCanvas.getContext("2d")},decodeAudioData:function(e){var t=this;return new Promise((function(n,a){new Promise((function(t,n){if(e instanceof ArrayBuffer)t(e);else if(e instanceof Blob){var a=new FileReader;a.onload=function(){t(a.result)},a.readAsArrayBuffer(e)}})).then((function(e){t.audioContext.decodeAudioData(e).then((function(e){t.buffer=e,n()})).catch((function(e){a(e)}))})).catch((function(e){a(e)}))}))},getAudioData:function(e){e=e||this.buffer,this.channelData=this.dropSamples(e.getChannelData(0),this.numberSamples)},drawCanvasWaveform:function(e){var t=this;e=e||1,this.ocCtx.fillStyle="#FFFFFF00",this.ocCtx.fillRect(0,0,this.WIDTH,this.HEIGHT),this.ocCtx.lineWidth=1,this.ocCtx.strokeStyle="black";var n=1*this.WIDTH/this.channelData.length,a=0;this.ocCtx.beginPath(),this.ocCtx.moveTo(a,this.channelData[0]*this.HEIGHT/128/2),this.channelData.forEach((function(r){var o=r*e,i=t.HEIGHT*(1+o)/2;t.ocCtx.lineTo(a,i),t.aveRMS+=r*r,t.peakRMS=Math.max(r*r,t.peakRMS),a+=n})),this.ocCtx.lineTo(this.WIDTH,this.HEIGHT/2),this.ocCtx.stroke(),this.aveRMS=Math.sqrt(this.aveRMS/this.channelData.length),this.aveDBs=20*Math.log(this.aveRMS)/Math.log(10),this.waveformImage=this.oCanvas.toDataURL()},dropSamples:function(e,t){var n=Math.max(parseInt(e.length/t),1);return e.filter((function(e,t){return t%n===0}))},generateWaveform:function(e){return this.decodeAudioData(e)},delegateToWorker:function(){this.worker||(this.worker=new Worker("../util/svgworker.js"),this.worker.addEventListener("message",this.workerCommunication.bind(this),!1),this.worker.postMessage(this.channelData))},workerCommunication:function(e){switch(e.data.type){case"path":this.setSVGpath(e.data.path,e.data.length),this.worker.removeEventListener("message",this.workerCommunication.bind(this),!1),this.worker.terminate(),this.worker=null}},setSVGpath:function(e,t){var n=this;this.svgPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.svgLength=t,this.svgPath.setAttribute("d",e),this.svgPath.setAttribute("vector-effect","non-scaling-stroke"),this.svgPath.setAttribute("stroke-width","0.5px"),this.oncomplete.forEach((function(e){return e(n.svgPath,n.svgLength)}))}};var On={name:"1qmr6ab",styles:"overflow:auto"},yn={name:"10kp0sj",styles:"height:230px"},wn={name:"u252p2",styles:"transform:scaleY(0.7) rotate(90deg);padding-right:5px;color:white"},kn=function(e){var t=e.timelineWidth,n=e.parentRef,o=Object(ut.a)().t,i=Object(b.b)(),c=Object(b.c)(Me),s=Object(b.c)(Be),f=Object(b.c)($e),j=Object(b.c)(Ue),p=Object(b.c)(ze),m=Object(b.c)(v),g=Object(r.useState)({x:0,y:0}),h=Object(Ht.a)(g,2),x=h[0],O=h[1],y=Object(r.useState)(!1),w=Object(Ht.a)(y,2),k=w[0],S=w[1],C=Object(r.useState)(!1),A=Object(Ht.a)(C,2),E=A[0],I=A[1],N=Object(r.useState)(1e3),T=Object(Ht.a)(N,2),D=T[0],P=T[1],R=Object(r.useRef)(0);Object(r.useEffect)((function(){s===R.current||k||(L(),R.current=s),n.current&&n.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})})),Object(r.useEffect)((function(){s&&f&&O({x:s/f*t,y:0})}),[t]);var L=function(){O({x:s/f*t,y:0})},M={left:function(){return i(ye(Math.max(s-D,0)))},right:function(){return i(ye(Math.min(s+D,f)))},increase:function(){return P((function(e){return Math.min(10*e,1e6)}))},decrease:function(){return P((function(e){return Math.max(e/10,1)}))}},W=Object(l.css)({backgroundColor:"black",height:"240px",width:"1px",position:"absolute",zIndex:2,boxShadow:"0 0 10px rgba(0, 0, 0, 0.3)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center"},"",""),H=Object(l.css)({background:"black",display:"inline-block",height:"10px",position:"relative",width:"20px","&:after":{borderTop:"10px solid black",borderLeft:"10px solid transparent",borderRight:"10px solid transparent",content:'""',height:0,left:0,position:"absolute",top:"10px",width:0},cursor:k?"grabbing":"grab",transitionDuration:"0.3s",transitionProperty:"transform","&:hover":{transform:"scale(1.1)"},"&:focus":{transform:"scale(1.1)"},"&:active":{transform:"scale(0.9)"}},"",""),G=wn;return Object(l.jsx)(Ft.GlobalHotKeys,{keyMap:Vt,handlers:m===a.cutting?M:{},allowChanges:!0},Object(l.jsx)(gn.a,{onDrag:function(e,n){var a=n.x;i(ye(a/t*f))},onStart:function(){S(!0),c?(I(!0),i(ve(!1))):I(!1)},onStop:function(e,n){var a=n.x;O({x:a,y:0}),i(ye(a/t*f)),S(!1),E&&i(ve(!0))},axis:"x",bounds:"parent",position:x,nodeRef:n},Object(l.jsx)("div",{ref:n,css:W},Object(l.jsx)("div",{css:H,"aria-grabbed":k,"aria-label":o("timeline.scrubber-text-aria",{currentTime:J(s),segment:j,segmentStatus:p[j].deleted?"Deleted":"Alive",moveLeft:Vt[M.left.name],moveRight:Vt[M.right.name],increase:Vt[M.increase.name],decrease:Vt[M.decrease.name]}),tabIndex:0},Object(l.jsx)(u.a,{css:G,icon:d.a,size:"1x"})))))},Sn=function(e){e.timelineWidth;var t=Object(ut.a)().t,n=Object(b.c)(ze),a=Object(b.c)($e),r=Object(b.c)(Ue),o=Object(l.css)({display:"flex",flexDirection:"row",paddingTop:"10px"},"","");return Object(l.jsx)("div",{css:o,title:"Segments"},n.map((function(e,n){return Object(l.jsx)("div",{key:e.id,title:t("timeline.segment-tooltip",{segment:n}),"aria-label":t("timeline.segments-text-aria",{segment:n,segmentStatus:e.deleted?"Deleted":"Alive",start:J(e.start),end:J(e.end)}),tabIndex:0,css:Object(l.css)({background:(o=e.deleted,i=r===n,o||i?o&&!i?"repeating-linear-gradient(\n                -45deg,\n                rgba(255, 45, 45, 0.4),\n                rgba(255, 45, 45, 0.4) 10px,\n                rgba(255, 0, 0, 0.4) 10px,\n                rgba(255, 0, 0, 0.4) 20px);":!o&&i?"rgba(0, 0, 200, 0.4)":o&&i?"repeating-linear-gradient(\n                -45deg,\n                rgba(200, 45, 45, 0.4),\n                rgba(200, 45, 45, 0.4) 10px,\n                rgba(200, 0, 0, 0.4) 10px,\n                rgba(200, 0, 0, 0.4) 20px);":void 0:"rgba(0, 0, 255, 0.4)"),borderRadius:"5px",borderStyle:r===n?"dashed":"solid",borderColor:"white",borderWidth:"1px",boxSizing:"border-box",width:(e.end-e.start)/a*100+"%",height:"230px",zIndex:1},"","")});var o,i})))},Cn={name:"mvrlf6",styles:"min-height:0"},An={name:"1d3w5wq",styles:"width:100%"},En=function(){var e=Object(ut.a)().t,t=Object(b.b)(),n=Object(b.c)(Ze),a=Object(b.c)((function(e){return e.videoState.status})),i=Object(r.useState)([]),c=Object(Ht.a)(i,2),f=c[0],j=c[1],p=Object(r.useState)(!1),m=Object(Ht.a)(p,2),g=m[0],h=m[1],x=Object(l.css)(Object(s.a)(Object(s.a)({display:"flex",flexDirection:"column",position:"absolute",justifyContent:"center"},f.length<=0&&{alignItems:"center"}),{},{width:"100%",height:"230px",paddingTop:"10px"}),"","");Object(r.useEffect)((function(){if("success"===a){var e=[],r=0;[n[0]].forEach((function(n,a,o){var i=null,c=new XMLHttpRequest;c.open("GET",n),c.responseType="blob",c.onload=function(){i=c.response;var n=new vn({type:"img",width:"2000",height:"230",samples:1e5,media:new File([i],i)});n.onerror=function(e){h(!0),console.log("Waveform could not be generated:"+e)},n.oncomplete=function(n,a){e.push(n),++r===o.length&&(j(e),t(Pe(e)))}},c.send()}))}}),[t,a,n]);return Object(l.jsx)("div",{css:x},f.length>0?f.map((function(e,t){return Object(l.jsx)("img",{key:t,alt:"Waveform",src:e||"",css:Cn})})):g?Object(l.jsx)("div",{css:An},Object(l.jsx)("hr",null)):Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)(u.a,{icon:d.s,spin:!0,size:"3x"}),Object(l.jsx)("div",null,e("timeline.generateWaveform-text"))))},In=function(){var e=Object(b.b)(),t=Object(b.c)($e),n=Object(b.c)(qe),a=Object(b.c)(Ye),o=Object(r.useRef)(null),i=Object(r.useRef)(null),c=Object(hn.a)(),s=c.ref,u=c.width,d=void 0===u?1:u;Object(r.useEffect)((function(){n&&o.current&&o.current.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}),[n]),Object(r.useEffect)((function(){void 0!==a&&i.current&&i.current.scrollTo(a*i.current.scrollWidth,0)}),[a]);var f=Object(l.css)({position:"relative",height:"250px",width:100*n+"%"},"","");return Object(l.jsx)("div",{css:On,ref:i,onScroll:function(t){var n,a;i.current&&e(De((null===(n=i.current)||void 0===n?void 0:n.scrollLeft)/(null===(a=i.current)||void 0===a?void 0:a.scrollWidth)))}},Object(l.jsx)("div",{ref:s,css:f,title:"Timeline",onMouseDown:function(n){return function(n){var a=n.currentTarget.getBoundingClientRect(),r=n.clientX-a.left;e(Le(!0)),e(ye(r/d*t))}(n)}},Object(l.jsx)(kn,{timelineWidth:d,parentRef:o}),Object(l.jsx)("div",{css:yn},Object(l.jsx)(En,null),Object(l.jsx)(Sn,{timelineWidth:d}))))};var Nn={name:"b4njcv",styles:"display:flex;justify-content:center;align-content:center;flex-direction:column"},Tn={padding:"16px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.3)"},Dn=function(e){var t=e.iconName,n=e.actionName,a=e.actionHandler,r=e.action,i=e.actionWithPayload,c=e.payload,s=e.tooltip,d=e.ariaLabelText,b=o.a.useRef(null);return Object(l.jsx)("div",{css:[ee,Tn,"",""],title:s,ref:b,role:"button",tabIndex:0,"aria-label":d,onClick:function(e){return a(e,r,i,c,b)},onKeyDown:function(e){" "!==e.key&&"Enter"!==e.key||a(e,r,i,c,void 0)}},Object(l.jsx)(u.a,{icon:t,size:"1x"}),n&&Object(l.jsx)("span",null,n))},Pn=function(e){var t=e.actionHandler,n=e.action,a=e.hotKeyName,r=Object(ut.a)().t,i=Object(b.c)(_e),c=o.a.useRef(null);return Object(l.jsx)("div",{css:[ee,Tn,"",""],title:r("cuttingActions.delete-restore-tooltip",{hotkeyName:a}),ref:c,role:"button",tabIndex:0,"aria-label":r("cuttingActions.delete-restore-tooltip-aria",{hotkeyName:a}),onClick:function(e){return t(e,n,void 0,void 0,c)},onKeyDown:function(e){" "!==e.key&&"Enter"!==e.key||t(e,n,void 0,void 0,void 0)}},Object(l.jsx)(u.a,{icon:i?d.z:d.A,size:"1x"}),Object(l.jsx)("div",null,r(i?"cuttingActions.delete-button":"cuttingActions.restore-button")))},Rn=function(){var e=Object(ut.a)().t,t=Object(b.b)(),n=Object(b.c)(v),r=Object(b.c)(qe),o=function(e,n,a,r,o){var i;(e.preventDefault(),e.stopPropagation(),n&&t(n()),a&&t(a(r)),o)&&(null===(i=o.current)||void 0===i||i.blur())},i={cut:function(e){e&&o(e,Ce,void 0,void 0,void 0)},delete:function(e){e&&o(e,Ae,void 0,void 0,void 0)},mergeLeft:function(e){e&&o(e,Ie,void 0,void 0,void 0)},mergeRight:function(e){e&&o(e,Ne,void 0,void 0,void 0)},zoomIn:function(e){e&&o(e,void 0,Te,r+.1,void 0)},zoomOut:function(e){e&&o(e,void 0,Te,r-.1,void 0)}},c=Object(l.css)(Object(s.a)({display:"flex",flexDirection:"row",justifyContent:"space-between"},Q(30,!0)),"",""),u=Object(l.css)(Object(s.a)({display:"flex",flexDirection:"row"},Q(30,!0)),"",""),f=Object(l.css)(Object(s.a)({display:"flex",flexDirection:"row"},Q(10,!0)),"",""),j=Nn;return Object(l.jsx)(Ft.GlobalHotKeys,{keyMap:_t,handlers:n===a.cutting?i:{},allowChanges:!0},Object(l.jsx)("div",{css:c},Object(l.jsx)("div",{css:u},Object(l.jsx)(Dn,{iconName:d.e,actionName:"Cut",actionHandler:o,action:Ce,actionWithPayload:void 0,payload:void 0,tooltip:e("cuttingActions.cut-tooltip",{hotkeyName:_t[i.cut.name]}),ariaLabelText:e("cuttingActions.cut-tooltip-aria",{hotkeyName:_t[i.cut.name]})}),Object(l.jsx)(Pn,{actionHandler:o,action:Ae,hotKeyName:_t[i.delete.name]}),Object(l.jsx)(Dn,{iconName:d.t,actionName:"Merge Left",actionHandler:o,action:Ie,actionWithPayload:void 0,payload:void 0,tooltip:e("cuttingActions.mergeLeft-tooltip",{hotkeyName:_t[i.mergeLeft.name]}),ariaLabelText:e("cuttingActions.mergeLeft-tooltip-aria",{hotkeyName:_t[i.mergeLeft.name]})}),Object(l.jsx)(Dn,{iconName:d.u,actionName:"Merge Right",actionHandler:o,action:Ne,actionWithPayload:void 0,payload:void 0,tooltip:e("cuttingActions.mergeRight-tooltip",{hotkeyName:_t[i.mergeRight.name]}),ariaLabelText:e("cuttingActions.mergeRight-tooltip-aria",{hotkeyName:_t[i.mergeRight.name]})})),Object(l.jsx)("div",{css:u},Object(l.jsx)("div",{css:f},Object(l.jsx)(Dn,{iconName:d.l,actionName:"",actionHandler:o,action:void 0,actionWithPayload:Te,payload:r-.1,tooltip:e("cuttingActions.zoomOut-tooltip",{hotkeyName:_t[i.mergeRight.name]}),ariaLabelText:e("cuttingActions.zoomOut-aria-tooltip",{hotkeyName:_t[i.mergeRight.name]})}),Object(l.jsx)("div",{css:j},e("cuttingActions.zoom")),Object(l.jsx)(Dn,{iconName:d.p,actionName:"",actionHandler:o,action:void 0,actionWithPayload:Te,payload:r+.1,tooltip:e("cuttingActions.zoomIn-tooltip",{hotkeyName:_t[i.mergeRight.name]}),ariaLabelText:e("cuttingActions.zoomIn-aria-tooltip",{hotkeyName:_t[i.mergeRight.name]})})))))},Ln=n(50),Mn=n(27),Wn=n(126),Hn=n(133),Gn=n(72),Bn=n(70),Fn=n(97);var zn={name:"pbjnao",styles:"align-self:center;width:110px;font-size:1em;line-height:32px"},Un={name:"1q4to1d",styles:"display:flex;flex-flow:row nowrap;line-height:2em;margin:10px"},_n={name:"1yjx7km",styles:"padding:20px"},Vn=function(){var e=Object(ut.a)(),t=e.t,n=e.i18n,a=Object(b.b)(),o=Object(b.c)(vt),i=Object(b.c)(yt),c=Object(b.c)(wt),u=Object(b.c)(kt),d=Object(b.c)(St);Object(r.useEffect)((function(){"idle"===i&&a(bt())}),[i,a]),Object(r.useEffect)((function(){if("success"===i)for(var e=0;e<o.length;e++)if(m.metadata.configureFields){var t=m.metadata.configureFields,n=o[e];if(n.title in t){if(!(Object.keys(t[n.title]).length>0))return;for(var r=t[n.title],c=0;c<n.fields.length;c++)n.fields[c].id in r&&"readonly"in r[n.fields[c].id]&&a(ht({catalogIndex:e,fieldIndex:c,value:r[n.fields[c].id].readonly}))}}}),[i,o,a]);var f=_n,j=Un,p=zn,g=function(e){return Object(l.css)(Object(s.a)({flex:"1",fontSize:"1em",marginLeft:"15px",borderRadius:"5px",backgroundColor:"snow",boxShadow:e?"0 0 0px rgba(0, 0, 0, 0.3)":"0 0 1px rgba(0, 0, 0, 0.3)"},e&&{color:"grey"}),"","")},h=function(e){return Object(l.css)({padding:"10px 10px",border:e?"0px solid #ccc":"1px solid #ccc"},"","")},x={control:function(e){return Object(s.a)(Object(s.a)({},e),{},{background:"snow"})},menu:function(e){return Object(s.a)(Object(s.a)({},e),{},{background:"snow",marginTop:0})}},v=function(e){return Object(l.css)({padding:"5px 10px",border:e?"0px solid #ccc":"1px solid #ccc"},"","")},O=function e(t,n,a){return Array.isArray(n)&&n.forEach((function(n){a.push(e(t,n,a))})),null===t||void 0===t?void 0:t.find((function(e){return e.submitValue===n}))},y=function(e){var t={};return e.forEach((function(e,n){t["catalog"+n]={},e.fields.forEach((function(e){if(t["catalog"+n][e.id]=e.value,e.collection){var a=N(e),r=e.value;if(Array.isArray(r)){var o=[];O(a,e.value,o),r=o}else r=null===a||void 0===a?void 0:a.find((function(e){return e.submitValue===r}));t["catalog"+n][e.id]=r}}))})),t},w=function(e){return e?void 0:t("metadata.validation.required")},k=function(e){return/^[0-9][0-9]:[0-9][0-9]:[0-9][0-9]$/.test(e)?void 0:t("metadata.validation.duration-format")},S=function(e){if(e){var n=void 0;return"[object Date]"===Object.prototype.toString.call(e)&&(n=Fn.DateTime.fromJSDate(e)),"string"===typeof e&&(n=Fn.DateTime.fromISO(e)),n&&n.isValid?void 0:t("metadata.validation.datetime")}},C=function(e){return e.required?w:"duration"===e.id?k:"date"===e.type||"time"===e.type?S:void 0},A=function(e,t){t.onBlur(e),function(e,t){for(var n=t.substring(t.indexOf("g")+1,t.indexOf(".")),r=t.substring(t.indexOf(".")+1,t.length),i=parseInt(n),c=0;c<o[i].fields.length;c++)if(o[i].fields[c].id===r){a(mt({catalogIndex:i,fieldIndex:c,value:E(o[i].fields[c],e)}));break}}(t.value,t.name)},E=function e(t,n){var a=n;return Array.isArray(n)&&(a=[],n.forEach((function(t){a.push(e(null,t))}))),"object"===typeof n&&null!==n&&n.hasOwnProperty("submitValue")?a=n.submitValue:"object"===typeof n&&null!==n&&n.__isNew__&&(a=n.value),!t||Array.isArray(n)||"creator"!==t.id&&"contributor"!==t.id||(a=[a]),!t||"date"!==t.type&&"time"!==t.type||"[object Date]"!==Object.prototype.toString.call(a)?!t||"date"!==t.type&&"time"!==t.type||"string"!==typeof a||""!==a&&(a=new Date(a).toJSON()):isNaN(a.getTime())||(a=a.toJSON()),a},I=function(e){Object.keys(e).forEach((function(t){var n=parseInt(t.replace("catalog",""));Object.keys(e[t]).forEach((function(r){for(var i=0;i<o[n].fields.length;i++)if(o[n].fields[i].id===r){a(mt({catalogIndex:n,fieldIndex:i,value:E(o[n].fields[i],e[t][r])}));break}})),a(ft())}))},N=function(e){if(e.collection){var a=[{value:"",label:"No value",submitValue:""}];return Object.entries(e.collection).forEach((function(r){var o=Object(Ht.a)(r,2),i=o[0],c=o[1],s=null;n.exists("metadata.".concat(e.id))&&(s=t("metadata.".concat(e.id,".").concat(i.replaceAll(".","-"))),"license"===e.id&&(s=t("metadata.".concat(e.id,".").concat(JSON.parse(i).label.replaceAll(".","-"))))),"isPartOf"===e.id&&(s=i),a.push({value:i,label:s||c,submitValue:c})})),a}return null},T=function(e,t){return t.id=t.name,e.collection?Array.isArray(e.value)?Object(l.jsx)(Hn.a,Object(Ln.a)({},t,{onBlur:function(e){A(e,t)},isMulti:!0,isClearable:!e.readOnly,isSearchable:!e.readOnly,openMenuOnClick:!e.readOnly,menuIsOpen:!e.readOnly&&void 0,options:N(e),styles:x,css:g(e.readOnly)})):Object(l.jsx)(Wn.a,Object(Ln.a)({},t,{onBlur:function(e){A(e,t)},isClearable:!e.readOnly,isSearchable:!e.readOnly,openMenuOnClick:!e.readOnly,menuIsOpen:!e.readOnly&&void 0,options:N(e),styles:x,css:g(e.readOnly)})):"date"===e.type?Object(l.jsx)("div",{css:[g(e.readOnly),v(e.readOnly),"",""]},Object(l.jsx)(Gn.a,Object(Ln.a)({},t,{onBlur:function(e){A(e,t)},name:e.id,format:"yyyy/MM/dd HH:mm",disabled:e.readOnly,dateFunsUtils:Bn.a,showError:Gn.c}))):"time"===e.type?Object(l.jsx)("div",{css:[g(e.readOnly),v(e.readOnly),"",""]},Object(l.jsx)(Gn.b,Object(Ln.a)({},t,{onBlur:function(e){A(e,t)},name:e.id,format:"HH:mm",disabled:e.readOnly,dateFunsUtils:Bn.a,showError:Gn.c}))):"text_long"===e.type?Object(l.jsx)("textarea",Object(Ln.a)({},t,{onBlur:function(e){A(e,t)},readOnly:e.readOnly,css:[g(e.readOnly),h(e.readOnly),"",""]})):Object(l.jsx)("input",Object(Ln.a)({},t,{onBlur:function(e){A(e,t)},readOnly:e.readOnly,css:[g(e.readOnly),h(e.readOnly),"",""]}))},D=function(e,a,r){return Object(l.jsx)(Mn.a,{key:r,name:"catalog"+a+"."+e.id,validate:C(e),type:"boolean"===e.type?"checkbox":void 0},(function(a){var r,o=a.input,i=a.meta;return Object(l.jsx)("div",{css:j},Object(l.jsx)("label",{css:p,htmlFor:o.name},n.exists("metadata.labels.".concat(e.id))?t("metadata.labels.".concat(e.id)):e.id),function(e,t){if("date"!==e.type&&"time"!==e.type||""!==t.value)return T(e,t);t.value;var n=Object(ce.a)(t,["value"]);return T(e,n)}(e,o),i.error&&i.touched&&Object(l.jsx)("span",{css:(r=!0,Object(l.css)(Object(s.a)(Object(s.a)({lineHeight:"32px",marginLeft:"10px"},r&&{color:"#800"}),{},{fontWeight:"bold"}),"",""))},i.error))}))},P=function(e,a,r){return Object(l.jsx)("div",{key:a},Object(l.jsx)("h2",null,n.exists("metadata.".concat(e.title.replaceAll(".","-")))?t("metadata.".concat(e.title.replaceAll(".","-"))):e.title),e.fields.map((function(e,t){return e.id in r&&"show"in r[e.id]?r[e.id].show?D(e,a,t):void 0:D(e,a,t)})))};return Object(l.jsx)(Mn.b,{onSubmit:I,subscription:{submitting:!0,pristine:!0},initialValues:y(o),render:function(e){var t=e.handleSubmit,n=e.form;return e.submitting,e.pristine,e.values,Object(l.jsx)("form",{onSubmit:function(e){t(e),n.reset()},css:f},Object(l.jsx)("div",{css:oe("failed"===i),role:"alert"},Object(l.jsx)("span",null,"A problem occurred during communication with Opencast."),Object(l.jsx)("br",null),c?"Details: "+c:"No error details are available.",Object(l.jsx)("br",null)),o.map((function(e,t){return m.metadata.configureFields&&e.title in m.metadata.configureFields?Object.keys(m.metadata.configureFields[e.title]).length>0?P(e,t,m.metadata.configureFields[e.title]):void 0:P(e,t,{})})),Object(l.jsx)("div",{css:oe("failed"===u),role:"alert"},Object(l.jsx)("span",null,"A problem occurred during communication with Opencast. ",Object(l.jsx)("br",null),"Changes could not be saved to Opencast."),Object(l.jsx)("br",null),d?"Details: "+d:"No error details are available.",Object(l.jsx)("br",null)))}})};var Kn={name:"mak02e",styles:"display:flex;align-items:center;margin:20px;padding:10px;background-color:#eee"},qn={name:"13ubd8d",styles:"margin:10px"},Yn=function(){var e=(0,Object(ut.a)().t)("trackSelection.description","Select or deselect which tracks are used for processing and publication."),t=Kn;return Object(l.jsx)("aside",{css:t},Object(l.jsx)(u.a,{css:qn,icon:d.j,size:"2x"}),e)},Jn={name:"eq7gsv",styles:"display:inline-block;width:100%;font-weight:bold;padding:5px 25px;border-bottom:1px solid white;text-transform:capitalize;fint-size:larger"},Zn={name:"fan84q",styles:"display:inline-block;width:80%;max-height:200px;margin:10px"},Xn={name:"12a7vix",styles:"display:flex;flex-wrap:wrap;justify-content:center;align-items:center;margin:20px;padding-bottom:10px;background-color:#eee;vertical-align:middle"},$n=function(e){var t=e.track,n=e.enabledCount,a=Object(ut.a)().t,r=Object(b.b)(),o=t.flavor.type+" "+(t.video_stream.enabled?"":"(".concat(a("trackSelection.trackInactive","inactive"),")")),i=Xn,c=Zn,s=Jn,u=t.video_stream.enabled?n>1?0:1:2,f=1!==u,j=[a("trackSelection.deleteTrackText","Delete Track"),a("trackSelection.cannotDeleteTrackText","Cannot Delete Track"),a("trackSelection.restoreTrackText","Restore Track")][u],p=[a("trackSelection.deleteTrackTooltip","Do not encode and publish this track."),a("trackSelection.cannotDeleteTrackTooltip","Cannot remove this track from publication."),a("trackSelection.restorerackTooltip","Encode and publish this track.")][u],m=[d.z,d.z,d.A][u];return Object(l.jsx)("div",{css:i},Object(l.jsx)("div",{css:s},o),Object(l.jsx)("div",{css:Object(l.css)({width:"95%",textAlign:"center",opacity:t.video_stream.enabled?"1":"0.5"},"","")},Object(l.jsx)(Bt.a,{css:c,url:t.uri,width:"90%"})),Object(l.jsx)(Qn,{text:j,tooltip:p,handler:function(){r(xe({id:t.id,enabled:!t.video_stream.enabled}))},icon:m,active:f}))},Qn=function(e){var t=e.handler,n=e.text,a=e.icon,r=e.tooltip,i=e.active,c=e.color,s=void 0===c?"black":c,d=[i?ee:te,{margin:"10px 15px",padding:"16px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.3)",width:"25%"}],b=o.a.useRef(null);return Object(l.jsx)("div",{css:d,tabIndex:0,ref:b,role:"button",title:r,"aria-label":r,onClick:function(){var e;i&&t(),null===(e=b.current)||void 0===e||e.blur()},onKeyDown:function(e){!i||" "!==e.key&&"Enter"!==e.key||t()}},Object(l.jsx)(u.a,{css:Object(l.css)({color:s},"",""),icon:a,size:"1x"}),Object(l.jsx)("div",null,n))},ea=function(){var e=Object(b.c)(nt),t=e.filter((function(e){return e.video_stream.enabled})).length,n=e.map((function(e){return Object(l.jsx)($n,{key:e.id,track:e,enabledCount:t})}));return Object(l.jsx)("div",null,n,Object(l.jsx)(Yn,null))},ta=function(e){var t,n=e.iconName,a=e.stateName,r=Object(ut.a)().t,o=Object(b.b)(),i=function(){o(k(a)),o(S(1))},c=Object(l.css)(Object(s.a)(Object(s.a)({width:"250px",height:"220px",flexDirection:"column",fontSize:"x-large"},Q(30,!1)),{},{boxShadow:"0 0 10px rgba(0, 0, 0, 0.3)"}),"","");switch(a){case"Save changes":t=r("finishMenu.save-button");break;case"Start processing":t=r("finishMenu.start-button");break;case"Discard changes":t=r("finishMenu.discard-button");break;default:t="Could not load String value"}return Object(l.jsx)("div",{css:[ee,c,"",""],role:"button",tabIndex:0,onClick:i,onKeyDown:function(e){" "!==e.key&&"Enter"!==e.key||i()}},Object(l.jsx)(u.a,{icon:n,size:"2x"}),Object(l.jsx)("div",null,t))},na=function(){var e=Object(l.css)(Object(s.a)({display:"flex",flexDirection:"row",justifyContent:"space-around",flexWrap:"wrap"},Q(30,!1)),"","");return Object(l.jsx)("div",{css:e},Object(l.jsx)(ta,{iconName:d.q,stateName:"Save changes"}),Object(l.jsx)(ta,{iconName:d.g,stateName:"Start processing"}),Object(l.jsx)(ta,{iconName:d.v,stateName:"Discard changes"}))};var aa={name:"vavmm1",styles:"max-width:500px"},ra=function(){var e=Object(ut.a)().t,t=Object(b.b)(),n=Object(b.c)(ze),a=Object(b.c)(nt),o=Object(b.c)(Pt),i=Object(b.c)(kt),c=d.q,s=!1,f=e("save.confirmButton-default-tooltip");"failed"===o||"failed"===i?(c=d.f,s=!1,f=e("save.confirmButton-failed-tooltip")):"success"===o&&"success"===i?(c=d.b,s=!1,f=e("save.confirmButton-success-tooltip")):"loading"!==o&&"loading"!==i||(c=d.s,s=!0,f=e("save.confirmButton-attempting-tooltip"));var j=function(){t(ft()),t(It({segments:n,tracks:a}))};return Object(r.useEffect)((function(){"success"===o&&"success"===i&&(t(Se(!1)),t(gt(!1)))}),[t,i,o]),Object(l.jsx)("div",{css:[ee,ne,"",""],title:f,role:"button",tabIndex:0,onClick:j,onKeyDown:function(e){" "!==e.key&&"Enter"!==e.key||j()}},Object(l.jsx)(u.a,{icon:c,spin:s,size:"1x"}),Object(l.jsx)("span",null,e("save.confirm-button")),Object(l.jsx)("div",{css:re,"aria-live":"polite","aria-atomic":"true"},function(){if("success"===o)return e("save.success-tooltip-aria")}()))},oa=function(){var e=Object(ut.a)().t,t=Object(b.c)(C),n=Object(b.c)(Pt),a=Object(b.c)(Rt),r=Object(b.c)(kt),i=Object(b.c)(St),c=Object(l.css)(Object(s.a)({height:"100%",display:"Save changes"!==t?"none":"flex",flexDirection:"column",alignItems:"center"},Q(30,!1)),"","");return Object(l.jsx)("div",{css:c,title:e("save.saveArea-tooltip")},Object(l.jsx)("h1",null,e("save.headline-text")),"success"===n&&"success"===r?Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)(u.a,{icon:d.c,size:"10x"}),Object(l.jsx)("div",null,e("save.success-text"))):Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)("span",{css:aa},e("save.info-text")),Object(l.jsx)("div",{css:ae},Object(l.jsx)(Ca,{pageNumber:0,label:e("various.goBack-button"),iconName:d.d}),Object(l.jsx)(ra,null))),Object(l.jsx)("div",{css:oe("failed"===n),role:"alert"},Object(l.jsx)("span",null,e("various.error-text")),Object(l.jsx)("br",null),a?e("various.error-details-text",{errorMessage:a}):e("various.error-noDetails-text"),Object(l.jsx)("br",null)),Object(l.jsx)("div",{css:oe("failed"===r),role:"alert"},Object(l.jsx)("span",null,e("various.error-text")),Object(l.jsx)("br",null),i?e("various.error-details-text",{errorMessage:i}):e("various.error-noDetails-text"),Object(l.jsx)("br",null)))},ia=Object(f.c)({name:"endState",initialState:{end:!1,value:"success"},reducers:{setEnd:function(e,t){e.end=t.payload.hasEnded,e.value=t.payload.value}}}),ca=ia.actions.setEnd,sa=function(e){return e.endState.end},la=function(e){return e.endState.value},ua=ia.reducer,da=function(){var e=Object(ut.a)().t,t=Object(b.b)(),n=function(){t(ca({hasEnded:!0,value:"discarded"}))};return Object(l.jsx)("div",{css:[ee,ne,"",""],title:e("discard.confirm-tooltip"),role:"button",tabIndex:0,onClick:n,onKeyDown:function(e){" "!==e.key&&"Enter"!==e.key||n()}},Object(l.jsx)(u.a,{icon:d.v,size:"1x"}),Object(l.jsx)("span",null,e("discard.confirm-button")))},ba=function(){var e=Object(ut.a)().t,t=Object(b.c)(C),n=Object(l.css)(Object(s.a)({display:"Discard changes"!==t?"none":"flex",flexDirection:"column",alignItems:"center"},Q(30,!1)),"","");return Object(l.jsx)("div",{css:n},Object(l.jsx)("h1",null,e("discard.headline-text")),Object(l.jsx)("span",null,e("discard.info-text")),Object(l.jsx)("div",{css:ae},Object(l.jsx)(Ca,{pageNumber:0,label:e("various.goBack-button"),iconName:d.d}),Object(l.jsx)(da,null)))},fa={status:"idle",error:void 0},ja=Object(f.b)("video/postVideoInformationWithWorkflow",function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.id){e.next=2;break}throw new Error("Missing media package identifier");case 2:return e.next=4,se.post("".concat(m.opencast.url,"/editor/").concat(m.id,"/edit.json"),{segments:Tt(t.segments),tracks:t.tracks,workflows:t.workflow});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),pa=Object(f.c)({name:"workflowPostAndProcessState",initialState:fa,reducers:{},extraReducers:function(e){e.addCase(ja.pending,(function(e,t){e.status="loading"})),e.addCase(ja.fulfilled,(function(e,t){e.status="success"})),e.addCase(ja.rejected,(function(e,t){e.status="failed",e.error=t.error.message}))}}),ma=function(e){return e.workflowPostAndProcessState.status},ga=function(e){return e.workflowPostAndProcessState.error},ha=pa.reducer;var xa={name:"ygo0cj",styles:"padding:16px;box-shadow:0 0 10px rgba(0, 0, 0, 0.3)"},va=function(e){var t=e.text,n=Object(b.b)(),a=Object(b.c)(at),o=Object(b.c)(Ve),i=Object(b.c)(ze),c=Object(b.c)(nt),s=Object(b.c)(ma),f=Object(b.c)(kt);Object(r.useEffect)((function(){"success"===s&&"success"===f&&(n(Se(!1)),n(gt(!1)))}),[n,f,s]);var j=function(){n(ft()),n(ja({segments:i,tracks:c,workflow:[{id:a[o].id}]}))},p=d.g,m=!1;"failed"===s||"failed"===f?(p=d.f,m=!1):"success"===s&&"success"===f?(p=d.b,m=!1,n(ca({hasEnded:!0,value:"success"}))):"loading"!==s&&"loading"!==f||(p=d.s,m=!0);var g=xa;return Object(l.jsx)("div",{css:[ee,g,"",""],title:"Start processing button",role:"button",tabIndex:0,onClick:j,onKeyDown:function(e){" "!==e.key&&"Enter"!==e.key||j()}},Object(l.jsx)(u.a,{icon:p,spin:m,size:"1x"}),Object(l.jsx)("span",null,t))},Oa=function(){var e=Object(ut.a)().t,t=Object(b.c)(ma),n=Object(b.c)(ga),a=Object(b.c)(kt),r=Object(b.c)(St),o=Object(l.css)(Object(s.a)({display:"flex",flexDirection:"column",alignItems:"center",padding:"20px"},Q(30,!1)),"","");return Object(l.jsx)("div",{css:o,title:e("workflowConfig.area-tooltip")},Object(l.jsx)("h2",null,e("workflowConfig.headline-text")),Object(l.jsx)(u.a,{icon:d.y,size:"10x"}),"Placeholder",Object(l.jsx)("div",null,e("workflowConfig.satisfied-text")),Object(l.jsx)("div",{css:ae},Object(l.jsx)(Ca,{pageNumber:1,label:e("various.goBack-button"),iconName:d.d}),Object(l.jsx)(va,{text:e("workflowConfig.confirm-button")})),Object(l.jsx)("div",{css:oe("failed"===t),role:"alert"},Object(l.jsx)("span",null,e("various.error-text")),Object(l.jsx)("br",null),n?e("various.error-details-text",{errorMessage:n}):e("various.error-noDetails-text"),Object(l.jsx)("br",null)),Object(l.jsx)("div",{css:oe("failed"===a),role:"alert"},Object(l.jsx)("span",null,e("various.error-text")),Object(l.jsx)("br",null),r?e("various.error-details-text",{errorMessage:r}):e("various.error-noDetails-text"),Object(l.jsx)("br",null)))},ya=n(254),wa=function(e){var t=e.stateName,n=e.workflowIndex,a=Object(ut.a)().t,r=Object(b.b)(),o=Object(b.c)(Ve),i=function(){r(Ee(n))},c=Object(l.css)({backgroundColor:n!==o?"snow":"#DDD",padding:"16px"},"","");return Object(l.jsx)("div",{css:[ee,c,"",""],title:a("workflowSelection.selectWF-button"),role:"button",tabIndex:0,"aria-label":a("workflowSelection.selectWF-button",{stateName:t}),onClick:i,onKeyDown:function(e){" "!==e.key&&"Enter"!==e.key||i()}},Object(l.jsx)("span",null,t))},ka=function(){var e=Object(ut.a)().t,t=Object(b.c)(at),n=Object(b.c)(C),a=Object(b.c)(A),r=Object(b.c)(Ve),o=Object(b.c)(ma),i=Object(b.c)(ga),c=Object(b.c)(Pt),u=Object(b.c)(Rt),f=Object(l.css)(Object(s.a)({padding:"20px",display:"Start processing"===n&&1===a?"flex":"none",flexDirection:"column",justifyContent:"center",alignItems:"center"},Q(50,!1)),"",""),j=Object(l.css)(Object(s.a)(Object(s.a)({display:"flex",flexDirection:"column",alignItems:"left"},Q(20,!1)),{},{flexWrap:"wrap",maxHeight:"50vh"}),"",""),p=function(n,a,r,o,c,s,u){return Object(l.jsx)("div",{css:f},Object(l.jsx)("h2",null,n),a,r&&Object(l.jsx)("div",{css:j,title:"Workflow Selection Area"},t.map((function(e,t){return Object(l.jsx)(wa,{key:t,stateName:e.name,workflowIndex:t})}))),o,Object(l.jsx)("div",{css:ae},Object(l.jsx)(Ca,{pageNumber:0,label:e("workflowSelection.back-button"),iconName:d.d}),c),Object(l.jsx)("div",{css:oe("failed"===s),role:"alert"},Object(l.jsx)("span",null,e("various.error-text")),Object(l.jsx)("br",null),u?e("various.error-details-text",{errorMessage:i}):e("various.error-noDetails-text"),Object(l.jsx)("br",null)))};return t.length<=0?p(e("workflowSelection.saveAndProcess-text"),Object(l.jsx)(ya.a,{i18nKey:"workflowSelection.noWorkflow-text"},"A problem occurred, there are no workflows to process your changes with.",Object(l.jsx)("br",null),"Please save your changes and contact an Opencast Administrator."),!1,"",Object(l.jsx)(ra,null),c,u):1===t.length?p(e("workflowSelection.saveAndProcess-text"),Object(l.jsx)(ya.a,{i18nKey:"workflowSelection.oneWorkflow-text"},'The video will be cut and processed with the workflow "',{workflow:t[0].name},'".',Object(l.jsx)("br",null),"This will take some time."),!1,"",Object(l.jsx)(va,{text:e("workflowSelection.startProcessing-button")}),o,i):p(e("workflowSelection.selectWF-text"),Object(l.jsx)("div",null,e("workflowSelection.manyWorkflows-text")),!0,Object(l.jsx)("div",null,Object(l.jsx)("i",null,t.length>r&&t[r].description?t[r].description:"\xa0")),Object(l.jsx)(va,{text:e("workflowSelection.startProcessing-button")}),o,i)};var Sa={name:"1666ohp",styles:"width:200px;padding:16px;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);justify-content:space-around"},Ca=function(e){var t=e.pageNumber,n=e.label,a=e.iconName,r=Object(b.b)(),o=function(){r(S(t))},i=Sa;return Object(l.jsx)("div",{css:[ee,i,"",""],role:"button",tabIndex:0,onClick:o,onKeyDown:function(e){" "!==e.key&&"Enter"!==e.key||o()}},Object(l.jsx)(u.a,{icon:a,size:"1x"}),Object(l.jsx)("span",null,n))},Aa=function(){var e=Object(b.c)(A),t=Object(l.css)({display:0!==e?"none":"block"},"",""),n=Object(l.css)({display:1!==e?"none":"block"},"",""),a=Object(l.css)({display:2!==e?"none":"block"},"","");return Object(l.jsx)("div",null,Object(l.jsx)("div",{css:t},Object(l.jsx)(na,null)),Object(l.jsx)("div",{css:n},Object(l.jsx)(oa,null),Object(l.jsx)(ka,null),Object(l.jsx)(ba,null)),Object(l.jsx)("div",{css:a},Object(l.jsx)(Oa,null)))},Ea=n(131);var Ia={name:"11eiv1e",styles:"position:relative;background-color:grey;height:30px;width:100%;overflow:hidden"},Na={name:"w1atjl",styles:"width:100%;height:100%"},Ta=function(){var e=Object(r.useRef)(null),t=Object(hn.a)({ref:e}).width,n=void 0===t?1:t,a=Object(r.useRef)(null),i=Object(b.b)(),c=Object(b.c)(qe),s=Object(b.c)(Ye),u=Object(b.c)(Je),d=Object(r.useState)(!1),f=Object(Ht.a)(d,2),j=f[0],p=f[1],m=Object(r.useState)({x:0,y:0}),g=Object(Ht.a)(m,2),h=g[0],x=g[1],v=Object(r.useRef)(0);Object(r.useEffect)((function(){void 0===s||s===v.current||j||(O(),v.current=s)}));var O=function(){void 0!==s&&e.current&&(console.log("tSP: "+s+" width: "+n),x({x:s*e.current.scrollWidth,y:0}))},y=function(t,n){if(e.current){var a=n.x;i(De(a/e.current.scrollWidth))}},w=function(){p(!0)},k=function(t,n){if(e.current){var a=n.x;x({x:a,y:0}),i(De(a/e.current.scrollWidth))}p(!1)},S=Ia,C=Object(l.css)({position:"absolute",backgroundColor:"#FFFFFF80",height:"100%",width:100/c+"%"},"","");return Object(l.jsx)(o.a.Fragment,null,1===c?void 0:Object(l.jsx)("div",{ref:e,css:S},Object(l.jsx)(gn.a,{onDrag:y,onStart:w,onStop:k,axis:"x",bounds:"parent",position:h,nodeRef:a},Object(l.jsx)("div",{ref:a,css:C})),u.map((function(e,t){return Object(l.jsx)("img",{key:t,alt:"Waveform",src:e||"",css:Na})}))))};var Da={name:"1d3w5wq",styles:"width:100%"},Pa=function(){var e=Object(b.c)(v),t=Object(b.c)(Ke),n=Object(b.c)(Ot);Object(Ea.a)((function(e){(t||n)&&e.preventDefault()}));var r=!1,o=function(t){return e===t?(r=!0,{display:"flex"}):{display:"none"}},i=Object(l.css)(Object(s.a)(Object(s.a)(Object(s.a)({},o(a.cutting)),{},{flexDirection:"column",justifyContent:"space-around"},Q(20,!1)),{},{paddingRight:"20px",paddingLeft:"20px"}),"",""),c=Object(l.css)(Object(s.a)(Object(s.a)(Object(s.a)({},o(a.metadata)),Q(20,!1)),{},{paddingRight:"20px",paddingLeft:"20px"}),"",""),f=Object(l.css)(Object(s.a)(Object(s.a)(Object(s.a)({},o(a.trackSelection)),{},{flexDirection:"column",alignContent:"space-around"},Q(20,!1)),{},{paddingRight:"20px",height:"100%"}),"",""),j=Object(l.css)(Object(s.a)(Object(s.a)(Object(s.a)({},o(a.finish)),{},{flexDirection:"column",justifyContent:"space-around"},Q(20,!1)),{},{paddingRight:"20px",height:"100%"}),"",""),p=Object(l.css)(Object(s.a)({display:r?"none":"flex",flexDirection:"column",alignItems:"center",padding:"20px"},Q(20,!1)),"","");return Object(l.jsx)("main",{css:Da,role:"main"},Object(l.jsx)("div",{css:i},Object(l.jsx)(pn,null),Object(l.jsx)(Rn,null),Object(l.jsx)(Ta,null),Object(l.jsx)(In,null)),Object(l.jsx)("div",{css:c},Object(l.jsx)(Vn,null)),Object(l.jsx)("div",{css:f},Object(l.jsx)(ea,null)),Object(l.jsx)("div",{css:j},Object(l.jsx)(Aa,null)),Object(l.jsx)("div",{css:p},Object(l.jsx)(u.a,{icon:d.y,size:"10x"}),"Placeholder"))},Ra=function(){var e=Object(ut.a)().t,t=function(){window.location.reload()};return Object(l.jsx)("div",{css:[ee,ne,"",""],title:e("theEnd.startOver-tooltip"),role:"button",tabIndex:0,onClick:t,onKeyDown:function(e){" "!==e.key&&"Enter"!==e.key||t()}},Object(l.jsx)("span",null,e("theEnd.startOver-button")))},La=function(){var e=Object(ut.a)().t,t=Object(b.c)(la),n=Object(b.c)($e),a=Object(l.css)(Object(s.a)({width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},Q(20,!1)),"","");return Object(l.jsx)("div",{css:a,title:"The End"},Object(l.jsx)(u.a,{icon:"discarded"===t?d.v:d.c,size:"10x"}),Object(l.jsx)("div",null,"discarded"===t?e("theEnd.discarded-text"):"success"===t?e("theEnd.info-text",{duration:"".concat(new Date(2*n).toISOString().substr(11,8))}):void 0),"discarded"===t&&Object(l.jsx)(Ra,null))};var Ma={name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"},Wa=function(){var e=Object(ut.a)().t,t=Object(b.c)(Jt),n=Object(b.c)(Zt),a=Ma,r=Object(l.css)(Object(s.a)({height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},Q(10,!1)),"","");return Object(l.jsx)("div",{css:r},Object(l.jsx)("div",null,e("error.generic-message")),Object(l.jsx)(u.a,{icon:d.i,size:"10x"}),Object(l.jsx)("span",null,t),Object(l.jsx)("br",null),Object(l.jsx)("div",{css:a},Object(l.jsx)("span",null,e("error.details")),Object(l.jsx)("br",null),Object(l.jsx)("span",null,n||e("various.error-noDetails-text"))))};var Ha={name:"oaz9xn",styles:"height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;a{color:#007bff;text-decoration:none;}li{margin:5px;}code{user-select:all;color:#e83e8c;}"},Ga=function(){var e=Object(ut.a)().t,t=Ha;return Object(l.jsx)("div",{css:t},Object(l.jsx)("h1",null,e("landing.main-heading")),Object(l.jsx)("div",null,Object(l.jsx)("li",null,e("landing.contact-admin")),Object(l.jsx)("li",null,e("landing.start-editing-1"),Object(l.jsx)("code",null," ?=id=[media-package-id]"),e("landing.start-editing-2")),Object(l.jsx)("li",null,e("landing.link-to-documentation"),Object(l.jsx)("a",{href:"https://docs.opencast.org/stable/admin/modules/editor/"},"docs.opencast.org"))))},Ba=function(){var e=Object(b.c)(sa),t=Object(b.c)(Yt),n={display:"flex",flexDirection:"row",height:"100%"};return Object(l.jsx)(o.a.Fragment,null,m.id?e?Object(l.jsx)(La,null):t?Object(l.jsx)(Wa,null):Object(l.jsx)("div",{css:n},Object(l.jsx)(Wt,null),Object(l.jsx)(Pa,null)):Object(l.jsx)(Ga,null))};var Fa=function(){return Object(l.jsx)("div",{className:"App"},Object(l.jsx)(X,null),Object(l.jsx)(Ba,null))},za=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,255)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),o(e),i(e)}))},Ua=Object(f.a)({reducer:{mainMenuState:O,finishState:E,videoState:ot,workflowPostState:Lt,workflowPostAndProcessState:ha,endState:ua,metadataState:At,errorState:Xt}}),_a=n(24),Va=Promise.race([W(),Y(300)]);Va.then((function(){c.a.render(Object(l.jsx)(o.a.StrictMode,null,Object(l.jsx)(b.a,{store:Ua},Object(l.jsx)(_a.a,{utils:Bn.a},Object(l.jsx)(Fa,null)))),document.getElementById("root"))}),(function(e){return t=Object(l.jsx)("p",null,"Fatal error while loading app: ".concat(e.message),Object(l.jsx)("br",null),"This might be caused by a incorrect configuration by the system administrator."),void c.a.render(t,document.getElementById("root"));var t})),za()}},[[220,1,2]]]);
//# sourceMappingURL=main.c3a4e934.chunk.js.map